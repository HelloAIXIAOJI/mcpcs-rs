# MCPä¼ è¾“æ–¹å¼å¯¹æ¯” ğŸ“Š

ç°åœ¨MCPCSRSæ”¯æŒ**ä¸‰ç§ä¼ è¾“æ–¹å¼**ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ï¼š

## ğŸš€ **ä¼ è¾“æ–¹å¼æ€»è§ˆ**

| ä¼ è¾“æ–¹å¼ | åè®®åŸºç¡€ | å®æ—¶æ€§ | å¤æ‚åº¦ | çŠ¶æ€ç®¡ç† | è®¤è¯æ”¯æŒ |
|---------|---------|--------|-------|----------|----------|
| **child-process** | stdio | ğŸŸ¢ é«˜ | ğŸŸ¢ ç®€å• | ğŸ”µ æœ‰çŠ¶æ€ | âŒ åŸºäºç¯å¢ƒ |
| **sse** | HTTP+EventStream | ğŸŸ¢ é«˜ | ğŸŸ¡ ä¸­ç­‰ | ğŸ”µ æœ‰çŠ¶æ€ | âœ… Headers+Token |
| **http** | HTTP Request/Response | ğŸŸ¡ ä¸­ç­‰ | ğŸŸ¢ ç®€å• | ğŸŸ¡ å¯é€‰ | âœ… Headers+Token |

## ğŸ“‹ **è¯¦ç»†å¯¹æ¯”**

### **1. Child Processï¼ˆå­è¿›ç¨‹ï¼‰** ğŸ–¥ï¸
```json
{
  "transport": "child-process",
  "command": "node",
  "args": ["server.js"]
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… **æœ€é«˜æ€§èƒ½** - ç›´æ¥stdioé€šä¿¡
- âœ… **å®æ—¶åŒå‘** - æ— å»¶è¿Ÿæ•°æ®äº¤æ¢
- âœ… **è¿›ç¨‹éš”ç¦»** - ç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒ
- âœ… **ç®€å•é…ç½®** - æ— éœ€ç½‘ç»œè®¾ç½®

**é€‚ç”¨åœºæ™¯ï¼š**
- æœ¬åœ°å¼€å‘å’Œè°ƒè¯•
- é«˜æ€§èƒ½æœ¬åœ°æœåŠ¡
- ç¦»çº¿å·¥å…·å’Œè„šæœ¬

### **2. Server-Sent Eventsï¼ˆSSEï¼‰** ğŸŒ
```json
{
  "transport": "sse",
  "url": "http://localhost:12121/sse",
  "auth_token": "bearer-token",
  "headers": {
    "X-API-Key": "api-key"
  }
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… **å®æ—¶æ¨é€** - æœåŠ¡å™¨ä¸»åŠ¨å‘é€äº‹ä»¶
- âœ… **è‡ªåŠ¨é‡è¿** - æ–­çº¿è‡ªåŠ¨æ¢å¤
- âœ… **ä¸°å¯Œè®¤è¯** - æ”¯æŒå¤šç§headers
- âœ… **æ–­ç‚¹ç»­ä¼ ** - Last-Event-IDæ”¯æŒ

**é€‚ç”¨åœºæ™¯ï¼š**
- éœ€è¦å®æ—¶é€šçŸ¥çš„åº”ç”¨
- é•¿è¿æ¥æœåŠ¡
- å¤æ‚è®¤è¯éœ€æ±‚
- äº‘æœåŠ¡é›†æˆ

### **3. HTTPï¼ˆè¯·æ±‚/å“åº”ï¼‰** ğŸ“¡
```json
{
  "transport": "http", 
  "url": "http://localhost:8080/mcp",
  "auth_token": "bearer-token",
  "stateless": true
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… **æ— çŠ¶æ€è®¾è®¡** - æ¯ä¸ªè¯·æ±‚ç‹¬ç«‹
- âœ… **ç¼“å­˜å‹å¥½** - æ ‡å‡†HTTPç¼“å­˜
- âœ… **è´Ÿè½½å‡è¡¡** - æ˜“äºæ¨ªå‘æ‰©å±•  
- âœ… **è°ƒè¯•ç®€å•** - æ ‡å‡†HTTPå·¥å…·

**é€‚ç”¨åœºæ™¯ï¼š**
- RESTful APIé£æ ¼æœåŠ¡
- éœ€è¦ç¼“å­˜çš„æŸ¥è¯¢æ“ä½œ
- å¾®æœåŠ¡æ¶æ„
- ç®€å•çš„è¯·æ±‚/å“åº”æ¨¡å¼

## ğŸ› ï¸ **ä½¿ç”¨æŒ‡å—**

### **Context7ç¤ºä¾‹**
```json
{
  "mcpServers": {
    "context7-sse": {
      "transport": "sse",
      "url": "https://mcp.context7.com/mcp",
      "headers": {
        "CONTEXT7_API_KEY": "YOUR_API_KEY"
      }
    },
    "context7-http": {
      "transport": "http", 
      "url": "https://mcp.context7.com/mcp",
      "auth_token": "YOUR_API_KEY",
      "stateless": true
    }
  }
}
```

### **å‘½ä»¤è¡Œä½¿ç”¨**
```bash
# å­è¿›ç¨‹æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
cargo run --bin mcpcs-client repl

# SSEæ¨¡å¼
cargo run --bin mcpcs-client sse --url http://localhost:12121/sse

# HTTPæ¨¡å¼  
cargo run --bin mcpcs-client http --url http://localhost:8080/mcp

# æœåŠ¡å™¨SSEæ¨¡å¼
cargo run --bin mcpcs-server sse --port 12121
```

## âš¡ **æ€§èƒ½ç‰¹å¾**

### **å»¶è¿Ÿå¯¹æ¯”**
- **child-process**: < 1ms (è¿›ç¨‹å†…é€šä¿¡)
- **sse**: 10-50ms (ç½‘ç»œ + è§£æ)
- **http**: 50-200ms (è¯·æ±‚/å“åº”å¾€è¿”)

### **ååé‡å¯¹æ¯”**  
- **child-process**: æœ€é«˜ (æ— ç½‘ç»œå¼€é”€)
- **sse**: é«˜ (æŒä¹…è¿æ¥)
- **http**: ä¸­ç­‰ (è¿æ¥å¤ç”¨)

### **èµ„æºä½¿ç”¨**
- **child-process**: å†…å­˜+CPU (ç‹¬ç«‹è¿›ç¨‹)
- **sse**: ç½‘ç»œ+å†…å­˜ (é•¿è¿æ¥)
- **http**: ç½‘ç»œ (çŸ­è¿æ¥)

## ğŸ¯ **é€‰æ‹©å»ºè®®**

### **å¼€å‘é˜¶æ®µ**
- ğŸ¥‡ **child-process** - å¿«é€ŸåŸå‹å’Œè°ƒè¯•
- ğŸ¥ˆ **sse** - æµ‹è¯•å®æ—¶åŠŸèƒ½
- ğŸ¥‰ **http** - APIå…¼å®¹æ€§æµ‹è¯•

### **ç”Ÿäº§ç¯å¢ƒ**
- ğŸ¥‡ **http** - ç®€å•å¯é ï¼Œæ˜“äºç›‘æ§
- ğŸ¥ˆ **sse** - å®æ—¶éœ€æ±‚é«˜çš„åœºæ™¯
- ğŸ¥‰ **child-process** - ç‰¹æ®Šé«˜æ€§èƒ½éœ€æ±‚

### **ç‰¹æ®Šåœºæ™¯**
- **å®æ—¶é€šçŸ¥**: SSE
- **æ‰¹é‡æŸ¥è¯¢**: HTTP
- **æœ¬åœ°å·¥å…·**: Child Process
- **äº‘æœåŠ¡**: HTTP/SSE
- **å¤æ‚è®¤è¯**: SSE/HTTP

## ğŸ”® **æœªæ¥è§„åˆ’**

1. **WebSocketæ”¯æŒ** - åŒå‘å®æ—¶é€šä¿¡
2. **gRPCæ”¯æŒ** - é«˜æ€§èƒ½RPC
3. **è‡ªå®šä¹‰åè®®** - ç‰¹æ®Šéœ€æ±‚é€‚é…

é€‰æ‹©åˆé€‚çš„ä¼ è¾“æ–¹å¼å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼ğŸš€
